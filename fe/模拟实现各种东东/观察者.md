# EventEmitter
```javascript
class EventEmitter {
  constructor() {
    this._events = {};
  }

  on(type, fn) {
    (this._events[type] || (this._events[type] = [])).push(fn);
  }

  once(type, fn) {
    fn.once = true;
    this.on(type, fn);
  }

  off(type, fn) {
    if(!type) {
      this._events = {};
    }
    if(!fn) {
      this._events[type] = null;
    }
    const eventsQueue = this._events[type];
    if(!eventsQueue) {
      return ;
    }
    eventsQueue.splice(eventsQueue.indexOf(fn), 1);
  }

  emit(type, ...args) {
    const eventsQueue = this._events[type];
    if(!eventsQueue) {
      return ;
    }
    eventsQueue.forEach(fn => {
      try { // 不应该让某个callback的错误影响后续函数的执行
        fn.apply(this, args);
        if(fn.once) {
          this.off(type, fn);
        }
      } catch(e) {
        console.log(e);
      }
    });
  }
}


```