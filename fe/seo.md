# 什么是SEO？
`SEO,Search Engin Optimization`:**搜索引擎优化**。它是利用搜索引擎的搜索为规则来提高网站在有关搜索引擎内的自然排名方式。

# SEO原理
+ 页面抓取：蜘蛛向`Server`请求页面，获取到页面内容
+ 分析入库：对获取到的内容进行分析，对优质的页面进行收录
+ 检索排序：用户搜索`keywords`的时候，从收录的页面中按照一定的规则进行排序，然后返回给用户结果

# 百度蜘蛛
## 页面抓取
**提交页面：**

1.  `sitemap`提交：`sitemap`(网站地图)。当蜘蛛来到我们的网站时，告诉它有多少页面，每个页面的地址、分类等信息。根据这些，蜘蛛会很轻松的爬完所有内容。如果页面分类比较多、数量比较大，建议添加`sitemap`索引文件，如果站点频繁更新、添加页面，最好及时更新`sitemap`文件。
2.  主动提交：直接把页面丢给百度的接口，亲自告诉百度有哪些页面（这是效率最高、收录最快的方式）。但是百度对每天提交的数量有限制，如果反复提交重复的页面，会被降低每日限额。
3.  实时提交：在页面中加入百度的提交代码，这样当页面被打开的时候就会自动把这个页面提交给百度。

> 以上3点可以同时使用，不冲突

**保证蜘蛛对页面可读：**

在`ajax`没有流行的时候，`SEO`对于前端的要求并不多。但是现在各种`VDOM`、框架，完全由`js`在客户端渲染。但是搜索引擎并不支持对`ajax`数据的爬取，只对`html`进行爬取（所以`SSR`才对`SEO`有好处）。

解决办法，比如：如果检测是爬虫过来，则转发到一个专门的路由去渲染，比如`Node.js`的`pug`就能很好的解决这个问题。

**URL与301**

`URL`的设置如果不规范、合理，后期再替换不合理的`URL`时，之前收录的页面会失效（死链，404也属于）。解决办法是向搜索引擎投诉、设置301跳转。

> 将首页的域名全部都设置301跳转到同一个`URL`，这样可以避免权重被分散。

> 301(Moved Permanently):指请求的文档在别的地方，新`URL`会在相应的头部信息中给出，浏览器会自动连接到新`URL`。

## 分析入库
当蜘蛛把页面抓取回去之后，就需要对页面内容进行分析，并择优收录入库。

除此之外，对于知识的保护，搜索引擎对当前网站进行分析后，如果发现内容已经收录（有别的网站跟这个差不多），就会降低当前权重，甚至不收录这个页面。

即便如此，很多网站为了保证页面的新鲜度、流量，也会爬取其他页面的内容，所以如果想让你的页面以较高的权重被收录就需要坚持更新高质量的原创内容。

## 检索排序
### 1. TDK优化：
`TDK`是`title`、`description`、`keywords`的缩写。<br>
顾名思义，就是`title`尽量简洁、突出页面主题，避免无意义的词加入到`title`中，干扰到搜索引擎识别网站的主题；<br>
`description`，对一个页面的概述，也是对`title`的补充，因为`title`的长度有限所以`description`要稍微详细的补充；<br>
`keywords`,提取页面的关键字，数量在3~6个内，想方设法让`keywords`都在页面中出现。

> 如果`title`主题不止一个，可以使用符号将不同的主题分割开来；`description`使用自然语言描述页面主要内容，最好把每个`keyword`都覆盖一遍。

### 2. 提升页面关键词密度<br>
这个很好理解，尽可能的让关键词占整个页面的内容更多一些。比如一些旅游网页，除了正文，一般还会有许多其他链接，这些链接又链接到网页内部，这样不同页面之间还会相互输出权重。除此之外，页面内部还涵盖了跟旅游相关的一系列内容，比如住宿、吃饭。这样尽可能地涵盖旅游有关的各种需求，这样用户在搜索旅游的时候被命中的概率就大大提升，同时还增加了旅游这个关键词的密度。

### 3. HTML标签语义化
+ 使用具有语义的`html`标签
+ 良好结构，不要嵌套太深
+ 善用标题h1、...、h6，特别是h1、h2，在标题中使用关键词可以提升排名。同时设置`rel="nofollow"`避免权重流失
+ microdata：利用DOM原有结构来给原有的标签添加语义化。**(这个不是百度支持的)**

#### microdata
`schema.org`提供了一组共享词汇表，可以使用这些词汇，以*主要搜索引擎*(Google、Microsoft、yandex、Yahoo)可以理解的方式标记页面。

##### 为什么要使用microdata？
网页的内容给人看的时候，可以很容易被理解其含义，但是搜索引擎对这些内容的理解有限，`microdata`就是用来告诉搜索引擎：这个信息是描述啥的，地点、人物等。这样搜索引擎和其他应用程序更好地了解了网页的内容并且以有用、相关的方式展示它。

#### itemscope和itemtype
先来看一段我抄过来的例子：
```html
<div>
 <h1>Avatar</h1>
 <span>导演：詹姆斯卡梅隆（1954年8月16日出生）</span>
 <span>科幻小说</ span>
 <a href="../movies/avatar-theatrical-trailer.html">预告片</a>
</div>

<!-- 添加itemscope，指定这个div中包含的HTML是关于某个特定的item的 -->
<div itemscope>
 <h1>Avatar</h1>
 <span>导演：詹姆斯卡梅隆（1954年8月16日出生）</span>
 <span>科幻小说</ span>
 <a href="../movies/avatar-theatrical-trailer.html">预告片</a>
</div>

<!-- 仅仅说明是某个特定的item肯定不够，itemtype指定这个项目的类型，这个例子是电影 -->
<div itemscope itemtype="http://schema.org/Movie">
 <h1>Avatar</h1>
 <span>导演：詹姆斯卡梅隆（1954年8月16日出生）</span>
 <span>科幻小说</ span>
 <a href="../movies/avatar-theatrical-trailer.html">预告片</a>
</div>
```
> 当然，这些都是可以嵌套的，也就是说，一个`itemscope`可以是另一个`itemscope`的`itemprop`。

#### itemprop
上面说明了某个`div`是个特定的项目，`itemtype`指明了项目的类型。接下来要说明更详细的一些信息了：比如电影里谁是导演，添加`itemprop="director"`
```html
<div itemscope itemtype="http://schema.org/Movie">
<!-- 说明h1包含了itemscope的一个属性。这个属性是名字,下面以此类推 -->
 <h1 itemprop="name">Avatar</h1>
 <span itemprop="director">导演：詹姆斯卡梅隆（1954年8月16日出生）</span>
 <span itemprop="genre">科幻小说</ span>
 <a itemprop="trailer" href="../movies/avatar-theatrical-trailer.html">预告片</a>
</div>
```
> 这样，搜索引擎就知道了这个div是一个电影的项目，h1里面的电影的名字，a里的连接是一个指向电影预告片的链接。

#### schema.org类型和属性
并不是所有的网页都跟电影有关，所有`schema.org`还描述了各种其他类型的`item`，每种类型都有自己的一组属性，用于描述`item`。

最宽的类型是[Thing](https://schema.org/Thing)，有四个属性：`name、description、url、image`。更多的类型去[官网](https://schema.org/docs/gs.html)看吧。
> 除了不可见文本，标记越多越好

#### 日期、时间
机器难以理解日期和时间。比如`04/10/11`是2004年10月11日，还是2011年4月11日，使用time标记跟datetime一起使用：
```html
<time datetime="2011-04-01">04/01/11</time>
<time datetime="2011-04-01T15:06">4月1日,下午15:06</time>
<!-- 开始时间 -->
<time itemprop="startDate" datetime="2011-04-01T15:06">4月1日,下午15:06</time>
```
也可以用这种方式来标记某事件持续时间，持续时间以P为前缀：
```html
<time datetime="P1H30M">1小时30分钟</time>
```

### 4. 其他优化：<br>
①比如`<img src="" alt="description for this img" />`，之前只知道alt是图片加载失败提示给用户对img的说明，但是它还有一个作用：在搜索引擎分析页面的时候，根据alt来判断img的内容，所以对页面有意义的图片都最好加上alt属性，并写清楚图片要反应的内容。<br>
②页面中指向其他页面的链接，要加上nofollow标签，避免向其他网站输出权重。百度蜘蛛会忽略掉加上nofollow的链接。也可以在meta中这么写`<meta name="robots" content="nofollow" />`，这样百度🕷不会追踪页面上所有的链接（这种情况适合链接全部指向别的域名的情况）。<br>
③友情链接：网页之间相互交换流量之外，还能够使搜索引擎顺着链接形成循环爬去，可以有效地提升网站的流量、快照的更新速度。<br>
④关键词筛选：对经常被搜索的关键词、热度相关词，可以将这些词添加到页面中，也可以提升命中率（这他妈都是运营干的了）。
