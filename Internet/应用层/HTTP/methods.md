# HTTP1.0 的方法

- get：获取 server 提供的某些资源
- post：发送资源给 server
- head: 请求资源的头部信息，其返回的头部信息和 get 一致。其应用在于下载某个文件时，先获取其相关信息，比如大小，然后再决定是否决定下载，节省贷款

# HTTP1.1 新增方法

- options：获取目的资源支持的通信选项，最常见的就是在 cors 跨域的时候非简单请求进行的预检请求
- trace：回显 server 收到的请求。主要用于测试和诊断
- connect
- put：新增资源或者替换掉原有资源
- delete：删除对应的资源

# GET 和 POST 的区别

首先来看一下一般的理解：
![](https://user-gold-cdn.xitu.io/2018/11/19/1672bc1e880722a7?w=1361&h=554&f=png&s=126520)

> GET 的语义就是获取资源，POST 的语义就是处理资源。

## HTTP 的几个特性

### 一、 安全

这里的安全跟`https`里面所谓的安全不是一回事。这里的安全指的是一个方法的语义在本质上是只读的(不会更改服务器资源)，那么它就是安全的。也就是说，如果客户端发起的请求使用了安全的方法的话，就不应该引起服务器的任何状态的变化，因此是无害的。所以是`RFC`中定义了`GET、HEAD、OPTIONS、TRACE`这几个方法是安全的。

> 但是这只是规范，并不能保证方法的实现也是安全的，服务器的实现可能不符合方法的语义，例如：可以通过 GET 方法修改服务器的资源。

之所以引入安全这个概念，是为了方便网络爬虫和缓存，以免调用或者缓存某些不安全方法时引起某些以外后果。用户代理应该在执行安全或不安全方法时做出区分对待，并给用户以提示。

### 二、幂等

`幂等`就是同一个请求方法执行多次和仅仅执行一次的效果完全相同。按照 RFC 规范，PUT、DELETE 和安全方法都是幂等的。

> 这也仅仅只是规范，具体是否幂等还得看具体的实现。

引入幂等主要是为了处理同一个请求重复发送的情况，比如在请求响应之前连接断开，如果方法是幂等的，就可以放心的重复请求。而反之，则会带来意想不到的后果，这也是在浏览器后退/刷新的时候遇到非幂等方法会给用户提示的原因。

### 三、可缓存性

顾名思义，就是一个方法是否可以被缓存。RFC 里 GET、HEAD 和某些情况下的 POST 都是可缓存的，但是绝大多数的浏览器的实现里仅仅支持 GET 和 HEAD。

> 以上三个特性都在强调一件事情：规范不等于实现(jser 应该深有体会)。

## 所以区别到底是什么？

GET 和 POST 的区别，本质上是语义也就是**规范**上的对比，而不是语法也就是具体**实现**的对比。

语义上的区别：

- `GET`的语义是请求获取指定的资源。`GET`方法是安全、幂等、可缓存的（除非有 `Cache-Control` Header 的约束）,`GET`方法的报文主体没有任何语义。
- `POST`的语义是根据请求负荷（报文主体）对指定的资源做出处理，具体的处理方式视资源类型而不同。`POST`不安全，不幂等，（大部分实现）不可缓存。为了针对其不可缓存性，有一系列的方法来进行优化。

还是举一个通俗栗子吧，在微博这个场景里，`GET`的语义会被用在「看看我的`Timeline`上最新的 20 条微博」这样的场景，而 POST 的语义会被用在「发微博、评论、点赞」这样的场景中。

一般常见的实现上的区别：

- 因为浏览器或者某些用户代理对于 url 长度的限制，导致 get 长度为 2kb，而 post 理论上不限制大小，但是实际上基本也就是 2GB
- post 的数据在 URL 中不可见，get 可见
- post 不能保存为标签，但是 get 可以
- 编码，GET 只能是 application/x-www-form-urlencoded，post 除了这个还可以是 multipart/form-data

## 参考

- [浅谈 HTTP 中 Get 与 Post 的区别](https://www.cnblogs.com/hyddd/archive/2009/03/31/1426026.html)
- [HTTP 协议中 GET 和 POST 方法的区别](https://sunshinevvv.coding.me/blog/2017/02/09/HttpGETv.s.POST/)

# POST,PUT,PATCH

- post 用来创建数据：`/api/articles/`，它的语言是在整个 articles 这个数据集下创建一个新的，因此多次调用 post 会多次创建新数据。因此 post 是非幂等的
- put 用来更新数据：`/api/articles/:id`，它的语义是对 id 的 article 进行更新，或者说我们把一个数据（完整的）直接放(put)到 articles 这个集合中, 这个新数据和 id 是一一对应的，也就是 put 是幂等的
- patch 用来局部更新数据：它和 put 更像，只不过放到 articles 的数据只是一部分而已，我们用这个部分新数据对已存在的某个元素进行更新。不过 patch 是非幂等的，因为 put 是直接用上传的资源去替换原有的资源，而 patch 则是描述了服务器应当如何去更新的指令，多次调用有可能会影响其他资源的变更，因此 patch 是非幂等的。

> 我们直说语言上的区别，什么技术上没区别的杠精别 bB cnm。
